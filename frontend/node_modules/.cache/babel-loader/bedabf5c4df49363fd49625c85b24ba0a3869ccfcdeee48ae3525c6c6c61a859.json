{"ast":null,"code":"import csrfFetch from \"./csrf\";\nimport { fetchAllUsers } from \"./users\";\nimport { receiveUser, receiveUsers } from \"./users\";\nconst RECEIVE_QUESTIONS = '/api/RECEIVE_QUESTIONS';\nconst RECEIVE_QUESTION = '/api/RECEIVE_QUESTION';\nexport const receiveQuestion = question => {\n  // debugger\n  return {\n    type: RECEIVE_QUESTION,\n    question: question\n  };\n};\nexport const receiveQuestions = questions => {\n  return {\n    type: RECEIVE_QUESTIONS,\n    questions: questions\n  };\n};\nexport const getQuestion = questionId => state => {\n  return state !== null && state !== void 0 && state.questions ? state.questions[questionId] : null;\n};\nexport const getQuestions = state => {\n  return state !== null && state !== void 0 && state.questions ? Object.values(state.questions) : [];\n};\nexport const fetchAllQuestions = () => async dispatch => {\n  // debugger\n  const response = await csrfFetch('/api/questions', {\n    method: 'GET'\n    // debugger\n  });\n\n  const data = await response.json();\n  // debugger\n  dispatch(receiveUsers(data.askers));\n  dispatch(receiveQuestions(data.questions));\n  // dispatch(receiveUsers)\n};\n\nexport const fetchQuestion = questionId => async dispatch => {\n  const response = await csrfFetch(`/api/questions/${questionId}`);\n  const data = await response.json();\n  // debugger\n  // data.question maybe\n  dispatch(receiveQuestion(data.question));\n  dispatch(receiveUser(data.asker));\n};\nexport const createQuestion = question => async dispatch => {\n  const response = await csrfFetch(`/api/questions`, {\n    method: 'POST',\n    body: JSON.stringify(question)\n  });\n  const data = await response.json();\n  dispatch(receiveQuestion(data.question));\n  // remove double dispatch and use payload in action instead\n};\n\nconst questionsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  // debugger\n  Object.freeze(state);\n  let nextState = {\n    ...state\n  };\n  switch (action.type) {\n    case RECEIVE_QUESTIONS:\n      nextState = {\n        ...state,\n        ...action.questions\n      };\n      return nextState;\n    case RECEIVE_QUESTION:\n      // nextState[action.payload.question.id] = action.payload.question\n      nextState[action.question.id] = action.question;\n      return nextState;\n    default:\n      return state;\n  }\n};\nexport default questionsReducer;","map":{"version":3,"names":["csrfFetch","fetchAllUsers","receiveUser","receiveUsers","RECEIVE_QUESTIONS","RECEIVE_QUESTION","receiveQuestion","question","type","receiveQuestions","questions","getQuestion","questionId","state","getQuestions","Object","values","fetchAllQuestions","dispatch","response","method","data","json","askers","fetchQuestion","asker","createQuestion","body","JSON","stringify","questionsReducer","action","freeze","nextState","id"],"sources":["/Users/zane/Desktop/GitHub/FSP/frontend/src/store/questions.js"],"sourcesContent":["import csrfFetch from \"./csrf\"\nimport { fetchAllUsers } from \"./users\"\nimport { receiveUser, receiveUsers } from \"./users\"\n\nconst RECEIVE_QUESTIONS = '/api/RECEIVE_QUESTIONS'\nconst RECEIVE_QUESTION = '/api/RECEIVE_QUESTION'\n\nexport const receiveQuestion = (question) => {\n    // debugger\n    return {\n        type: RECEIVE_QUESTION,\n        question: question\n    }\n}\n\nexport const receiveQuestions = (questions) => {\n    return {\n        type: RECEIVE_QUESTIONS,\n        questions: questions\n    }\n}\n\nexport const getQuestion = (questionId) => (state) => {\n    return state?.questions ? state.questions[questionId] : null;\n}\n\nexport const getQuestions = (state) => {\n    return state?.questions ? Object.values(state.questions) : []\n}\n\nexport const fetchAllQuestions = () => async (dispatch) => {\n    // debugger\n    const response = await csrfFetch('/api/questions', {\n        method: 'GET'\n        // debugger\n        })\n    \n    const data = await response.json()\n    // debugger\n    dispatch(receiveUsers(data.askers))\n    dispatch(receiveQuestions(data.questions))\n    // dispatch(receiveUsers)\n}\n\nexport const fetchQuestion = (questionId) => async (dispatch) => {\n    const response = await csrfFetch(`/api/questions/${questionId}`)\n\n    const data = await response.json()\n    // debugger\n    // data.question maybe\n    dispatch(receiveQuestion(data.question))\n    dispatch(receiveUser(data.asker))\n}\n\nexport const createQuestion = (question) => async (dispatch) => {\n    const response = await csrfFetch(`/api/questions`, {\n        method: 'POST',\n        body: JSON.stringify(question)\n    })\n\n    const data = await response.json();\n    dispatch(receiveQuestion(data.question))\n    // remove double dispatch and use payload in action instead\n}\n\n\nconst questionsReducer = (state={}, action) => {\n    // debugger\n    Object.freeze(state);\n    let nextState = { ...state };\n\n    switch (action.type) {\n        case RECEIVE_QUESTIONS:\n            nextState = { ...state, ...action.questions} \n            return nextState\n        case RECEIVE_QUESTION:\n            // nextState[action.payload.question.id] = action.payload.question\n            nextState[action.question.id] = action.question\n            return nextState\n        default:\n            return state\n    }\n\n}\n\nexport default questionsReducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}