{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zane/Desktop/GitHub/FSP/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/zane/Desktop/GitHub/FSP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/zane/Desktop/GitHub/FSP/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./QuestionsCreate.css\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import*as questionActions from\"../../store/questions.js\";import{Link}from\"react-router-dom\";import{Redirect}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var QuestionsCreate=function QuestionsCreate(){var dispatch=useDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loginRedirect=_useState6[0],setloginRedirect=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),errors=_useState8[0],setErrors=_useState8[1];var asker=useSelector(function(state){return state.session.user;});if(!asker){return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}// later: add error slice of state to show that you aren't logged in\nvar handleTitle=function handleTitle(e){return setTitle(e.target.value);};var handleBody=function handleBody(e){return setBody(e.target.value);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:// debugger\ne.preventDefault();_context.next=3;return setErrors([]);case 3:_context.next=5;return dispatch(questionActions.createQuestion({title:title,body:body,asker_id:asker.id}));case 5:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var showErrors=function showErrors(inputType){var errorEl;errors.forEach(function(error){if(error.includes(inputType)){errorEl=/*#__PURE__*/_jsx(\"ul\",{className:\"Error\",children:error});}});return errorEl;};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Ask a public question\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Title\",/*#__PURE__*/_jsx(\"span\",{children:\"Be specific and imagine you're asking a question to another person\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:handleTitle})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Body\",/*#__PURE__*/_jsx(\"span\",{children:\"Include all the information someone would need to answer your question\"}),/*#__PURE__*/_jsx(\"textarea\",{value:body,onChange:handleBody})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Post your Question\"})]})]});};export default QuestionsCreate;","map":{"version":3,"names":["useState","useDispatch","useSelector","questionActions","Link","Redirect","QuestionsCreate","dispatch","title","setTitle","body","setBody","loginRedirect","setloginRedirect","errors","setErrors","asker","state","session","user","handleTitle","e","target","value","handleBody","handleSubmit","preventDefault","createQuestion","asker_id","id","showErrors","inputType","errorEl","forEach","error","includes"],"sources":["/Users/zane/Desktop/GitHub/FSP/frontend/src/components/QuestionsCreate/QuestionsCreate.js"],"sourcesContent":["import \"./QuestionsCreate.css\"\nimport { useState } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport * as questionActions from \"../../store/questions.js\"\nimport { Link } from \"react-router-dom\"\nimport { Redirect } from \"react-router-dom\"\n\nconst QuestionsCreate = () => {\n    const dispatch = useDispatch()\n    const [title, setTitle] = useState('')\n    const [body, setBody] = useState('')\n    const [loginRedirect, setloginRedirect] = useState(false)\n    const [errors, setErrors] = useState([])\n\n    const asker = useSelector((state) => state.session.user)\n\n    if (!asker) {  \n        return <Redirect to='/login'/>\n    }\n        // later: add error slice of state to show that you aren't logged in\n\n    const handleTitle = (e) => setTitle(e.target.value)\n    const handleBody = (e) => setBody(e.target.value)\n\n    const handleSubmit = async (e) => {\n        // debugger\n        e.preventDefault()\n        await setErrors([]);\n        // debugger\n        await dispatch(questionActions.createQuestion({title, body, asker_id: asker.id}))\n        // debugger\n        //     .catch(async (res) => {\n        //         let data;\n        //         try {\n        //             data = await  res.clone().json();\n        //         } catch {\n        //             data = await res.text();\n        //         }\n        //         if (data?.errors) {\n        //             setErrors(data.errors)\n        //         } else if (data) {\n        //             setErrors([data])\n        //         } else {\n        //             setErrors([res.statusText])\n        //         }\n        //     })\n            // debugger\n    }\n\n    const showErrors = (inputType) => {\n        let errorEl;\n\n        errors.forEach((error) => {\n            if (error.includes(inputType)) {\n                errorEl = <ul className='Error'>{error}</ul>\n            }\n        })\n        return errorEl\n    }\n\n    return (\n        <div>\n            <h1>Ask a public question</h1>\n            <form onSubmit={handleSubmit}>\n                <label>Title \n                    <span>Be specific and imagine you're asking a question to another person</span>\n                    <input type='text'\n                        value={title}\n                        onChange={handleTitle}\n                    />\n                </label>\n                <label>Body \n                    <span>Include all the information someone would need to answer your question</span>\n                    <textarea\n                        value={body}\n                        onChange={handleBody}\n                    />\n                </label>\n                <button type='submit'>Post your Question</button>\n            </form>\n        </div>\n    )\n}\n\nexport default QuestionsCreate"],"mappings":"uYAAA,MAAO,uBAAuB,CAC9B,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAO,GAAKC,gBAAe,KAAM,0BAA0B,CAC3D,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,QAAQ,KAAQ,kBAAkB,yFAE3C,GAAMC,gBAAe,CAAG,QAAlBA,gBAAe,EAAS,CAC1B,GAAMC,SAAQ,CAAGN,WAAW,EAAE,CAC9B,cAA0BD,QAAQ,CAAC,EAAE,CAAC,wCAA/BQ,KAAK,eAAEC,QAAQ,eACtB,eAAwBT,QAAQ,CAAC,EAAE,CAAC,yCAA7BU,IAAI,eAAEC,OAAO,eACpB,eAA0CX,QAAQ,CAAC,KAAK,CAAC,yCAAlDY,aAAa,eAAEC,gBAAgB,eACtC,eAA4Bb,QAAQ,CAAC,EAAE,CAAC,yCAAjCc,MAAM,eAAEC,SAAS,eAExB,GAAMC,MAAK,CAAGd,WAAW,CAAC,SAACe,KAAK,QAAKA,MAAK,CAACC,OAAO,CAACC,IAAI,GAAC,CAExD,GAAI,CAACH,KAAK,CAAE,CACR,mBAAO,KAAC,QAAQ,EAAC,EAAE,CAAC,QAAQ,EAAE,CAClC,CACI;AAEJ,GAAMI,YAAW,CAAG,QAAdA,YAAW,CAAIC,CAAC,QAAKZ,SAAQ,CAACY,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,GACnD,GAAMC,WAAU,CAAG,QAAbA,WAAU,CAAIH,CAAC,QAAKV,QAAO,CAACU,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,GAEjD,GAAME,aAAY,4FAAG,iBAAOJ,CAAC,mHACzB;AACAA,CAAC,CAACK,cAAc,EAAE,uBACZX,UAAS,CAAC,EAAE,CAAC,8BAEbR,SAAQ,CAACJ,eAAe,CAACwB,cAAc,CAAC,CAACnB,KAAK,CAALA,KAAK,CAAEE,IAAI,CAAJA,IAAI,CAAEkB,QAAQ,CAAEZ,KAAK,CAACa,EAAE,CAAC,CAAC,CAAC,sDAkBpF,kBAvBKJ,aAAY,4CAuBjB,CAED,GAAMK,WAAU,CAAG,QAAbA,WAAU,CAAIC,SAAS,CAAK,CAC9B,GAAIC,QAAO,CAEXlB,MAAM,CAACmB,OAAO,CAAC,SAACC,KAAK,CAAK,CACtB,GAAIA,KAAK,CAACC,QAAQ,CAACJ,SAAS,CAAC,CAAE,CAC3BC,OAAO,cAAG,WAAI,SAAS,CAAC,OAAO,UAAEE,KAAK,EAAM,CAChD,CACJ,CAAC,CAAC,CACF,MAAOF,QAAO,CAClB,CAAC,CAED,mBACI,oCACI,oBAAI,uBAAqB,EAAK,cAC9B,cAAM,QAAQ,CAAEP,YAAa,wBACzB,yBAAO,OACH,oCAAM,oEAAkE,EAAO,cAC/E,cAAO,IAAI,CAAC,MAAM,CACd,KAAK,CAAEjB,KAAM,CACb,QAAQ,CAAEY,WAAY,EACxB,GACE,cACR,yBAAO,MACH,oCAAM,wEAAsE,EAAO,cACnF,iBACI,KAAK,CAAEV,IAAK,CACZ,QAAQ,CAAEc,UAAW,EACvB,GACE,cACR,eAAQ,IAAI,CAAC,QAAQ,UAAC,oBAAkB,EAAS,GAC9C,GACL,CAEd,CAAC,CAED,cAAelB,gBAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}