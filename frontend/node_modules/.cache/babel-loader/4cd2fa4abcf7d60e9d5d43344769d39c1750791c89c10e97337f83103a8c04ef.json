{"ast":null,"code":"import _objectSpread from\"/Users/zane/Desktop/GitHub/FSP/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/zane/Desktop/GitHub/FSP/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/zane/Desktop/GitHub/FSP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import csrfFetch from\"./csrf\";var RECEIVE_USER='api/RECEIVE_USER';var RECEIVE_USERS='api/RECEIVE_USERS';export var receiveUser=function receiveUser(user){return{type:RECEIVE_USER,user:user};};export var receiveUsers=function receiveUsers(users){// debugger\nreturn{type:RECEIVE_USERS,users:users};};export var getUsers=function getUsers(state){return state.users;};export var fetchUser=function fetchUser(userId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:res=csrfFetch(\"/api/users/\".concat(userId),{method:'GET'});if(!res.ok){_context.next=6;break;}_context.next=4;return res.json();case 4:data=_context.sent;dispatch(receiveUser(data));case 6:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var fetchAllUsers=function fetchAllUsers(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var res,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:res=csrfFetch(\"/api/users\",{method:\"GET\"});// debugger\nif(!res.ok){_context2.next=7;break;}_context2.next=4;return res.json();case 4:data=_context2.sent;debugger;dispatch(receiveUsers(data.users));case 7:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};var usersReducer=function usersReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var action=arguments.length>1?arguments[1]:undefined;Object.freeze(state);var nextState=_objectSpread({},state);// debugger\nswitch(action.type){case RECEIVE_USER:nextState[action.user.id]=action.user;return nextState;case RECEIVE_USERS:// debugger\nnextState=_objectSpread(_objectSpread({},state),action.users);// debugger\nreturn nextState;// case RECEIVE_QUESTION:\n//     nextState[action.payload.asker.id] = action.payload.asker\ndefault:return state;}};export default usersReducer;","map":{"version":3,"names":["csrfFetch","RECEIVE_USER","RECEIVE_USERS","receiveUser","user","type","receiveUsers","users","getUsers","state","fetchUser","userId","dispatch","res","method","ok","json","data","fetchAllUsers","usersReducer","action","Object","freeze","nextState","id"],"sources":["/Users/zane/Desktop/GitHub/FSP/frontend/src/store/users.js"],"sourcesContent":["import csrfFetch from \"./csrf\"\n\nconst RECEIVE_USER = 'api/RECEIVE_USER'\nconst RECEIVE_USERS = 'api/RECEIVE_USERS'\n\nexport const receiveUser = (user) => {\n    return {\n        type: RECEIVE_USER,\n        user: user\n    }\n}\n\nexport const receiveUsers = (users) => {\n    // debugger\n    return {\n    type: RECEIVE_USERS, \n    users: users\n    }\n}\n\nexport const getUsers = (state) => {\n    return state.users\n}\n\nexport const fetchUser = (userId) => async dispatch => {\n    const res = csrfFetch(`/api/users/${userId}`, {\n        method: 'GET'\n    })\n\n    if (res.ok) {\n        const data = await res.json()\n        dispatch(receiveUser(data))\n    }\n}\n\nexport const fetchAllUsers = () => async dispatch => {\n    const res = csrfFetch(`/api/users`, {\n        method: \"GET\"\n    })\n    // debugger\n    if (res.ok) {\n        const data = await res.json()\n        debugger\n        dispatch(receiveUsers(data.users))\n    }\n}\n\nconst usersReducer = (state={}, action) => {\n    Object.freeze(state)\n    let nextState = { ...state }\n    // debugger\n    switch (action.type) {\n        case RECEIVE_USER:\n            nextState[action.user.id] = action.user\n            return nextState\n        case RECEIVE_USERS:\n            // debugger\n            nextState = { ...state, ...action.users}\n            // debugger\n            return nextState\n        // case RECEIVE_QUESTION:\n        //     nextState[action.payload.asker.id] = action.payload.asker\n        default: \n            return state\n    }\n}\n\nexport default usersReducer"],"mappings":"sYAAA,MAAOA,UAAS,KAAM,QAAQ,CAE9B,GAAMC,aAAY,CAAG,kBAAkB,CACvC,GAAMC,cAAa,CAAG,mBAAmB,CAEzC,MAAO,IAAMC,YAAW,CAAG,QAAdA,YAAW,CAAIC,IAAI,CAAK,CACjC,MAAO,CACHC,IAAI,CAAEJ,YAAY,CAClBG,IAAI,CAAEA,IACV,CAAC,CACL,CAAC,CAED,MAAO,IAAME,aAAY,CAAG,QAAfA,aAAY,CAAIC,KAAK,CAAK,CACnC;AACA,MAAO,CACPF,IAAI,CAAEH,aAAa,CACnBK,KAAK,CAAEA,KACP,CAAC,CACL,CAAC,CAED,MAAO,IAAMC,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,KAAK,CAAK,CAC/B,MAAOA,MAAK,CAACF,KAAK,CACtB,CAAC,CAED,MAAO,IAAMG,UAAS,CAAG,QAAZA,UAAS,CAAIC,MAAM,mGAAK,iBAAMC,QAAQ,gIACzCC,GAAG,CAAGb,SAAS,sBAAeW,MAAM,EAAI,CAC1CG,MAAM,CAAE,KACZ,CAAC,CAAC,KAEED,GAAG,CAACE,EAAE,+CACaF,IAAG,CAACG,IAAI,EAAE,QAAvBC,IAAI,eACVL,QAAQ,CAACT,WAAW,CAACc,IAAI,CAAC,CAAC,sDAElC,iEAED,MAAO,IAAMC,cAAa,CAAG,QAAhBA,cAAa,qGAAS,kBAAMN,QAAQ,oIACvCC,GAAG,CAAGb,SAAS,cAAe,CAChCc,MAAM,CAAE,KACZ,CAAC,CAAC,CACF;AAAA,IACID,GAAG,CAACE,EAAE,iDACaF,IAAG,CAACG,IAAI,EAAE,QAAvBC,IAAI,gBACV,SACAL,QAAQ,CAACN,YAAY,CAACW,IAAI,CAACV,KAAK,CAAC,CAAC,wDAEzC,mEAED,GAAMY,aAAY,CAAG,QAAfA,aAAY,EAAyB,IAArBV,MAAK,2DAAC,CAAC,CAAC,IAAEW,OAAM,2CAClCC,MAAM,CAACC,MAAM,CAACb,KAAK,CAAC,CACpB,GAAIc,UAAS,kBAAQd,KAAK,CAAE,CAC5B;AACA,OAAQW,MAAM,CAACf,IAAI,EACf,IAAKJ,aAAY,CACbsB,SAAS,CAACH,MAAM,CAAChB,IAAI,CAACoB,EAAE,CAAC,CAAGJ,MAAM,CAAChB,IAAI,CACvC,MAAOmB,UAAS,CACpB,IAAKrB,cAAa,CACd;AACAqB,SAAS,gCAAQd,KAAK,EAAKW,MAAM,CAACb,KAAK,CAAC,CACxC;AACA,MAAOgB,UAAS,CACpB;AACA;AACA,QACI,MAAOd,MAAK,EAExB,CAAC,CAED,cAAeU,aAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}